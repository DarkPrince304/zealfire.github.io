---
layout: post
title: Week five and issues with PDF generation
---

The week five of coding period has ended and as planned I started to work on generating pdf using third party libraries. As expected the week turned out to be very eventful and very exciting for me atleast because I really like the idea of interfacing Drupal with external libraries and tools, mainly because it makes Drupal more useful and easier to use.

The first external library which I am using to generate PDFs is <a href="wkhtmltopdf.org">wkhtmltopdf</a>. The library is an open source command line tool which renders HTML into PDF. It run headless and do not require a display or display service. The library is awesome mainly because quality of PDF generated by this is far superior than other PDF generating libraries.

Since the amount of pre-work invloved before actually getting a PDF format of HTML content was extensive so I am using a PHP wrapper for the same. I had option of either using <a href="https://github.com/mikehaertl/phpwkhtmltopdf">phpwkhtmltopdf</a> or <a href="https://github.com/KnpLabs/snappy">snappy</a>. After using both I decided to go with former mainly because of the large number of utility functions provided by the wrapper and easily followable documentation.

Selecting wrapper was only a start, I had initially tested the library using some random HTML document (it didn't involved interface of Drupal) and the result were as expected. But when I tried to generate PDF via rendering of HTML content generated by twig template a network error kept showing:
<strong>ContentOperationNotPermittedError</strong>

By doing a lot of debugging I came to conclusion that presence of base tag in twig template was causing problem. On removing it the error does not shows up and PDF is generating successfully. Since I think this is problem of binary file of library so I created an issue for same in both <a href="https://github.com/mikehaertl/phpwkhtmltopdf/issues/97#issuecomment-116849859">wrapper</a> and <a href="https://github.com/wkhtmltopdf/wkhtmltopdf/issues/1937#issuecomment-116846005">library repo on GitHub</a>.

Since this week I was able to create plugin for wkhtmltopdf libary so next week I will be focussing on resolving any further issues which I face while using this plugin and also start to work on generating plugin for mPF library.

Some progress of PDF part of  module can be viewed over <a href="https://github.com/zealfire/pdf_api" style="text-decoration:none;" target="_blank">here</a> and remaining over <a href="https://github.com/zealfire/printable/tree/pdf">here</a>. 